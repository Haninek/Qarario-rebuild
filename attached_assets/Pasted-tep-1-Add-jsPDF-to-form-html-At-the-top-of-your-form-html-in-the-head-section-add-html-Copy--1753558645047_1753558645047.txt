tep 1: Add jsPDF to form.html
At the top of your form.html (in the <head> section), add:

html
Copy
Edit
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
✔️ This includes jsPDF — no installs needed.

✅ Step 2: Add a download button to the result
In the <script> section where you show the score (out.innerHTML = ...), add this inside the HTML block just after the score:

html
Copy
Edit
<div class="text-end mt-3">
  <button onclick="downloadPDF()" class="btn btn-outline-primary">Download PDF Report</button>
</div>
✅ Step 3: Add this downloadPDF() function to your <script>
Below your submitScore() function, add:

html
Copy
Edit
<script>
  let cachedResult = {};

  function downloadPDF() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    let y = 10;

    doc.setFontSize(16);
    doc.text("Qarari Risk Assessment Report", 20, y);
    y += 10;

    doc.setFontSize(12);
    doc.text(`Score: ${cachedResult.score.total_score}`, 20, y);
    y += 6;
    doc.text(`Raw Score: ${cachedResult.score.raw_score}`, 20, y);
    y += 6;
    doc.text(`Max Possible: ${cachedResult.score.max_possible}`, 20, y);
    y += 10;

    doc.setFontSize(10);
    doc.text("Inputs Provided:", 20, y);
    y += 6;

    const inputs = cachedResult.input || {};
    for (const [key, value] of Object.entries(inputs)) {
      if (y > 280) { doc.addPage(); y = 10; }
      doc.text(`${key}: ${value}`, 20, y);
      y += 5;
    }

    doc.save("qarari-risk-report.pdf");
  }

  async function submitScore(e) {
    e.preventDefault();
    const data = {};
    document.querySelectorAll('#scoreForm [name]').forEach(input => {
      data[input.name] = input.value;
    });

    const res = await fetch('/score/finance', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    });
    const result = await res.json();
    cachedResult = result;

    // Your existing DOM render logic...
  }

  window.onload = loadForm;
</script>
✅ What this gives you:
A “Download PDF” button

Full summary of score, risk tier, inputs

Stylish branded report (can be improved later)

